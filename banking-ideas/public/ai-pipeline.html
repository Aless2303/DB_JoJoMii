<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BANK//IDEAS - AI Pipeline (11 Agents)</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a1a;
            --cyan: #00FFFF;
            --yellow: #FFFF00;
            --magenta: #FF00FF;
            --green: #00FF00;
            --red: #FF0000;
            --white: #FFFFFF;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'VT323', monospace;
            background: var(--bg);
            color: var(--white);
            min-height: 100vh;
            overflow-x: auto;
        }

        /* Header */
        .header {
            background: linear-gradient(90deg, #000080, #000066);
            border-bottom: 4px solid var(--yellow);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 32px;
            color: var(--cyan);
            text-shadow: 0 0 20px var(--cyan);
        }
        .logo span { color: var(--yellow); }
        .page-num {
            background: var(--red);
            padding: 8px 20px;
            font-size: 24px;
        }
        .run-btn {
            background: var(--green);
            color: #000;
            border: none;
            padding: 12px 30px;
            font-family: 'VT323', monospace;
            font-size: 20px;
            cursor: pointer;
            text-transform: uppercase;
        }
        .run-btn:hover { box-shadow: 0 0 20px var(--green); }
        .run-btn.running { background: var(--yellow); animation: blink 0.5s infinite; }
        @keyframes blink { 50% { opacity: 0.7; } }

        /* Main */
        .main {
            padding: 30px;
            display: flex;
            gap: 20px;
        }

        /* Pipeline */
        .pipeline {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            flex: 1;
            overflow-x: auto;
            padding-bottom: 20px;
        }

        /* Stage */
        .stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            min-width: 180px;
        }
        .stage-label {
            color: var(--magenta);
            font-size: 14px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* Parallel Box */
        .parallel-box {
            border: 2px dashed var(--magenta);
            border-radius: 8px;
            padding: 15px 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            position: relative;
            background: rgba(255,0,255,0.05);
        }
        .parallel-box::before {
            content: 'PARALLEL';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg);
            color: var(--magenta);
            padding: 0 10px;
            font-size: 12px;
        }

        /* Node */
        .node {
            background: rgba(0,0,50,0.9);
            border: 2px solid #444;
            border-radius: 6px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.3s;
            width: 170px;
            text-align: center;
        }
        .node:hover {
            border-color: var(--cyan);
            box-shadow: 0 0 15px rgba(0,255,255,0.3);
        }
        .node.selected {
            border-color: var(--yellow);
            box-shadow: 0 0 20px rgba(255,255,0,0.4);
        }
        .node.running {
            border-color: var(--yellow);
            animation: pulse 0.8s infinite;
        }
        .node.done {
            border-color: var(--green);
            box-shadow: 0 0 15px rgba(0,255,0,0.4);
        }
        .node.done::after {
            content: '‚úì';
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--green);
            color: #000;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        @keyframes pulse { 50% { transform: scale(1.02); } }

        .node-icon { font-size: 28px; margin-bottom: 8px; }
        .node-title { font-size: 14px; color: var(--cyan); margin-bottom: 4px; }
        .node-model { font-size: 12px; color: #888; }
        .node-tag {
            display: inline-block;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 3px;
            margin-top: 6px;
        }
        .tag-llm { background: rgba(0,255,255,0.2); color: var(--cyan); }
        .tag-parallel { background: rgba(0,255,0,0.2); color: var(--green); }
        .tag-seq { background: rgba(255,255,0,0.2); color: var(--yellow); }

        /* Arrow */
        .arrow {
            color: var(--cyan);
            font-size: 30px;
            opacity: 0.4;
            align-self: center;
        }
        .arrow.active { opacity: 1; color: var(--yellow); }
        .arrow.done { opacity: 1; color: var(--green); }

        /* Panel */
        .panel {
            width: 400px;
            min-width: 400px;
            background: rgba(0,0,50,0.95);
            border: 2px solid var(--cyan);
            border-radius: 8px;
            max-height: calc(100vh - 140px);
            overflow-y: auto;
            display: none;
        }
        .panel.open { display: block; }
        .panel-header {
            background: linear-gradient(90deg, #000080, #000066);
            padding: 15px 20px;
            border-bottom: 2px solid var(--cyan);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
        }
        .panel-title { color: var(--cyan); font-size: 20px; }
        .panel-close {
            background: none;
            border: 2px solid var(--red);
            color: var(--red);
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 18px;
        }
        .panel-content { padding: 20px; }
        .section { margin-bottom: 20px; }
        .section-title {
            color: var(--yellow);
            font-size: 16px;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        .section-title::before { content: '‚ñ∂ '; color: var(--green); }
        .info-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid #333;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 10px;
        }
        .info-card p { font-size: 15px; line-height: 1.6; color: #ccc; }
        .code-box {
            background: #000;
            border: 1px solid var(--cyan);
            border-radius: 4px;
            padding: 12px;
            overflow-x: auto;
        }
        .code-box code {
            font-size: 13px;
            color: var(--green);
            white-space: pre-wrap;
        }
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #222;
        }
        .detail-label { color: #888; }
        .detail-value { color: var(--cyan); }

        /* Progress */
        .progress-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,50,0.95);
            border-top: 2px solid var(--yellow);
            padding: 15px 30px;
            display: none;
        }
        .progress-bar.visible { display: block; }
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .progress-title { color: var(--cyan); font-size: 18px; }
        .progress-status { color: var(--yellow); }
        .progress-track {
            height: 8px;
            background: #333;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--magenta), var(--cyan), var(--green));
            width: 0%;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">BANK//<span>IDEAS</span></div>
        <div style="color: var(--yellow);">AI PIPELINE ¬∑ 11 AGENTS ¬∑ VERCEL AI SDK</div>
        <div class="page-num">P.500</div>
        <button class="run-btn" id="runBtn" onclick="runPipeline()">‚ñ∂ RUN PIPELINE</button>
    </header>

    <div class="main">
        <div class="pipeline" id="pipeline">
            <!-- INPUT -->
            <div class="stage">
                <div class="stage-label">INPUT</div>
                <div class="node" data-id="input" onclick="showPanel('input')">
                    <div class="node-icon">üìù</div>
                    <div class="node-title">FORM INPUT</div>
                    <div class="node-model">7-Step Form</div>
                    <span class="node-tag tag-llm">Zod</span>
                </div>
            </div>
            <div class="arrow" data-arrow="0">‚Üí</div>

            <!-- VALIDATOR -->
            <div class="stage">
                <div class="stage-label">STEP 1</div>
                <div class="node" data-id="validator" onclick="showPanel('validator')">
                    <div class="node-icon">‚úÖ</div>
                    <div class="node-title">VALIDATOR</div>
                    <div class="node-model">claude-3-haiku</div>
                    <span class="node-tag tag-seq">Sequential</span>
                </div>
            </div>
            <div class="arrow" data-arrow="1">‚Üí</div>

            <!-- PARALLEL ANALYZERS -->
            <div class="stage">
                <div class="stage-label">STEP 2</div>
                <div class="parallel-box">
                    <div class="node" data-id="basic" onclick="showPanel('basic')">
                        <div class="node-icon">üìã</div>
                        <div class="node-title">BASIC INFO</div>
                        <div class="node-model">claude-3-haiku</div>
                        <span class="node-tag tag-parallel">Parallel</span>
                    </div>
                    <div class="node" data-id="tech" onclick="showPanel('tech')">
                        <div class="node-icon">‚ö°</div>
                        <div class="node-title">TECHNOLOGIES</div>
                        <div class="node-model">claude-3-haiku</div>
                        <span class="node-tag tag-parallel">Parallel</span>
                    </div>
                    <div class="node" data-id="business" onclick="showPanel('business')">
                        <div class="node-icon">üíº</div>
                        <div class="node-title">BUSINESS CTX</div>
                        <div class="node-model">claude-3-haiku</div>
                        <span class="node-tag tag-parallel">Parallel</span>
                    </div>
                    <div class="node" data-id="regulations" onclick="showPanel('regulations')">
                        <div class="node-icon">‚öñÔ∏è</div>
                        <div class="node-title">REGULATIONS</div>
                        <div class="node-model">claude-3-haiku</div>
                        <span class="node-tag tag-parallel">Parallel</span>
                    </div>
                    <div class="node" data-id="differentiators" onclick="showPanel('differentiators')">
                        <div class="node-icon">üéØ</div>
                        <div class="node-title">DIFFERENTIATORS</div>
                        <div class="node-model">claude-3-haiku</div>
                        <span class="node-tag tag-parallel">Parallel</span>
                    </div>
                    <div class="node" data-id="other" onclick="showPanel('other')">
                        <div class="node-icon">üìé</div>
                        <div class="node-title">OTHER DETAILS</div>
                        <div class="node-model">claude-3-haiku</div>
                        <span class="node-tag tag-parallel">Parallel</span>
                    </div>
                </div>
            </div>
            <div class="arrow" data-arrow="2">‚Üí</div>

            <!-- AGGREGATOR -->
            <div class="stage">
                <div class="stage-label">STEP 3</div>
                <div class="node" data-id="aggregator" onclick="showPanel('aggregator')">
                    <div class="node-icon">üîÄ</div>
                    <div class="node-title">AGGREGATOR</div>
                    <div class="node-model">Pure Function</div>
                    <span class="node-tag tag-seq">Merge</span>
                </div>
            </div>
            <div class="arrow" data-arrow="3">‚Üí</div>

            <!-- HTML BUILDER -->
            <div class="stage">
                <div class="stage-label">STEP 4</div>
                <div class="node" data-id="htmlbuilder" onclick="showPanel('htmlbuilder')">
                    <div class="node-icon">üèóÔ∏è</div>
                    <div class="node-title">HTML BUILDER</div>
                    <div class="node-model">claude-3-haiku</div>
                    <span class="node-tag tag-llm">LLM</span>
                </div>
            </div>
            <div class="arrow" data-arrow="4">‚Üí</div>

            <!-- STATISTICIAN -->
            <div class="stage">
                <div class="stage-label">STEP 5</div>
                <div class="node" data-id="statistician" onclick="showPanel('statistician')">
                    <div class="node-icon">üìä</div>
                    <div class="node-title">STATISTICIAN</div>
                    <div class="node-model">claude-3-haiku</div>
                    <span class="node-tag tag-llm">Scoring</span>
                </div>
            </div>
            <div class="arrow" data-arrow="5">‚Üí</div>

            <!-- VISUAL DESIGNER -->
            <div class="stage">
                <div class="stage-label">STEP 6</div>
                <div class="node" data-id="visual" onclick="showPanel('visual')">
                    <div class="node-icon">üé®</div>
                    <div class="node-title">VISUAL DESIGNER</div>
                    <div class="node-model">Pure Function</div>
                    <span class="node-tag tag-seq">HTML Gen</span>
                </div>
            </div>
            <div class="arrow" data-arrow="6">‚Üí</div>

            <!-- OUTPUT -->
            <div class="stage">
                <div class="stage-label">OUTPUT</div>
                <div class="node" data-id="output" onclick="showPanel('output')">
                    <div class="node-icon">üì∫</div>
                    <div class="node-title">TELETEXT PAGE</div>
                    <div class="node-model">PostgreSQL</div>
                    <span class="node-tag tag-seq">Final</span>
                </div>
            </div>
        </div>

        <!-- Side Panel -->
        <div class="panel" id="panel">
            <div class="panel-header">
                <span class="panel-title" id="panelTitle">Agent Details</span>
                <button class="panel-close" onclick="closePanel()">√ó</button>
            </div>
            <div class="panel-content" id="panelContent"></div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar">
        <div class="progress-header">
            <span class="progress-title">üöÄ RUNNING PIPELINE...</span>
            <span class="progress-status" id="progressStatus">Initializing...</span>
        </div>
        <div class="progress-track">
            <div class="progress-fill" id="progressFill"></div>
        </div>
    </div>

    <script>
        const agents = {
            input: {
                title: 'üìù FORM INPUT (7 Steps)',
                desc: 'Formularul cu 7 pa»ôi care colecteazƒÉ toate informa»õiile despre idee de la utilizator.',
                schema: `IdeaFormSchema = z.object({
  // Step 1: Basic Info
  title: z.string().min(5).max(100),
  shortDescription: z.string(),
  category: z.enum([...]),
  problemSolved: z.string(),
  
  // Step 2: Technologies
  aiTechnologies: z.array(z.string()),
  blockchainTechnologies: z.array(z.string()),
  otherTechnologies: z.array(z.string()),
  
  // Step 3: Solution Type
  platform: z.string(),
  
  // Step 4: Business Context
  targetSegment: z.string(),
  monetizationModel: z.string(),
  
  // Step 5: Regulations
  regulations: z.array(z.string()),
  complianceNotes: z.string().optional(),
  
  // Step 6: Differentiators
  uniqueValue: z.string(),
  githubLink: z.string().url().optional(),
  
  // Step 7: Other
  team: z.string().optional(),
  additionalNotes: z.string().optional()
});`,
                details: [
                    ['Steps', '7 sections'],
                    ['Required Fields', '12'],
                    ['Validation', 'Zod + React Hook Form'],
                    ['Storage', 'PostgreSQL']
                ]
            },
            validator: {
                title: '‚úÖ VALIDATOR AGENT',
                desc: 'ValideazƒÉ, normalizeazƒÉ »ôi √éMBOGƒÇ»öE»òTE datele brute. CompleteazƒÉ c√¢mpuri lipsƒÉ cu valori inteligente deduse din context.',
                schema: `ValidatedIdeaSchema = z.object({
  ideaTitle: z.string(),
  bigIdea: z.string(),
  mainCategory: z.string(),
  problemSolved: z.string(),
  coreTechnologies: z.array(z.string()),
  solutionType: z.string(),
  targetSegment: z.string(),
  monetizationModel: z.string(),
  applicableRegulations: z.array(z.string()),
  uniqueValue: z.string(),
  projectStage: z.string(),
  implementationLevel: z.array(z.string()),
  githubLink: z.string().nullable(),
  teamComposition: z.string(),
  // ... more fields
});`,
                code: `const { object } = await generateObject({
  model: anthropic("claude-3-haiku-20240307"),
  schema: ValidatedIdeaSchema,
  prompt: \`ValideazƒÉ »ôi √ÆmbogƒÉ»õe»ôte datele...\`
});`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Method', 'generateObject()'],
                    ['Role', 'DATA ANALYST'],
                    ['Execution', 'SEQUENTIAL']
                ]
            },
            basic: {
                title: 'üìã BASIC INFO ANALYZER',
                desc: 'AnalizeazƒÉ informa»õiile de bazƒÉ »ôi creeazƒÉ headline, tagline, beneficii cheie »ôi audien»õƒÉ »õintƒÉ.',
                schema: `BasicInfoAnalysisSchema = z.object({
  headline: z.string(),
  tagline: z.string(),
  category: z.string(),
  problemSummary: z.string(),
  keyBenefits: z.array(z.string()),
  targetAudience: z.string()
});`,
                code: `// Runs in PARALLEL with other analyzers
const [basic, tech, business, ...] = await Promise.all([
  analyzeBasicInfo(validatedData),
  analyzeTechnologies(validatedData),
  analyzeBusinessContext(validatedData),
  // ...
]);`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Role', 'MARKETING COPYWRITER'],
                    ['Output', 'Headlines + Benefits'],
                    ['Execution', 'PARALLEL']
                ]
            },
            tech: {
                title: '‚ö° TECHNOLOGIES ANALYZER',
                desc: 'EvalueazƒÉ stack-ul tehnologic, nivelul de inova»õie »ôi creeazƒÉ un sumar tehnic accesibil.',
                schema: `TechnologiesAnalysisSchema = z.object({
  primaryTech: z.array(z.string()),
  techCategory: z.string(),
  innovationLevel: z.string(),  // "cutting-edge" | "modern" | "standard"
  techSummary: z.string(),
  techBadges: z.array(z.string())
});`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Role', 'CTO / Tech Expert'],
                    ['Evaluates', 'Innovation Level'],
                    ['Execution', 'PARALLEL']
                ]
            },
            business: {
                title: 'üíº BUSINESS CONTEXT ANALYZER',
                desc: 'AnalizeazƒÉ modelul de business, oportunitatea de pia»õƒÉ, scalabilitate »ôi valoarea pentru bancƒÉ.',
                schema: `BusinessContextAnalysisSchema = z.object({
  segment: z.string(),
  revenueModel: z.string(),
  marketOpportunity: z.string(),
  businessValue: z.string(),
  scalabilityScore: z.string()
});`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Role', 'BUSINESS STRATEGIST'],
                    ['Output', 'Market Analysis'],
                    ['Execution', 'PARALLEL']
                ]
            },
            regulations: {
                title: '‚öñÔ∏è REGULATIONS ANALYZER',
                desc: 'EvalueazƒÉ conformitatea cu GDPR, PSD2, DORA »ôi alte reglementƒÉri bancare. IdentificƒÉ riscuri »ôi oferƒÉ recomandƒÉri.',
                schema: `RegulationsAnalysisSchema = z.object({
  complianceStatus: z.string(),  // "compliant" | "partial" | "needs-work"
  keyRegulations: z.array(z.string()),
  riskLevel: z.string(),  // "low" | "medium" | "high"
  complianceSummary: z.string()
});`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Role', 'COMPLIANCE OFFICER'],
                    ['Checks', 'GDPR, PSD2, DORA, AML'],
                    ['Execution', 'PARALLEL']
                ]
            },
            differentiators: {
                title: 'üéØ DIFFERENTIATORS ANALYZER',
                desc: 'IdentificƒÉ USP (Unique Selling Point), avantaj competitiv »ôi nivelul de pregƒÉtire pentru produc»õie.',
                schema: `DifferentiatorsAnalysisSchema = z.object({
  uniqueSellingPoint: z.string(),
  competitiveAdvantage: z.string(),
  readinessLevel: z.string(),  // "concept" | "prototype" | "mvp" | "production"
  implementationBadges: z.array(z.string()),
  githubAvailable: z.boolean()
});`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Role', 'PRODUCT STRATEGIST'],
                    ['Output', 'USP + Readiness'],
                    ['Execution', 'PARALLEL']
                ]
            },
            other: {
                title: 'üìé OTHER DETAILS ANALYZER',
                desc: 'AnalizeazƒÉ informa»õii despre echipƒÉ, demo disponibil, suport necesar »ôi alte eviden»õieri.',
                schema: `OtherDetailsAnalysisSchema = z.object({
  teamSize: z.string(),
  hasDemo: z.boolean(),
  supportNeeded: z.array(z.string()),
  additionalHighlights: z.array(z.string())
});`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Role', 'PROJECT MANAGER'],
                    ['Output', 'Team + Resources'],
                    ['Execution', 'PARALLEL']
                ]
            },
            aggregator: {
                title: 'üîÄ AGGREGATOR',
                desc: 'Func»õie PURƒÇ (fƒÉrƒÉ LLM) care combinƒÉ toate analizele √Æntr-un singur obiect structurat.',
                schema: `AggregatedDataSchema = z.object({
  basicInfo: BasicInfoAnalysisSchema,
  technologies: TechnologiesAnalysisSchema,
  businessContext: BusinessContextAnalysisSchema,
  regulations: RegulationsAnalysisSchema,
  differentiators: DifferentiatorsAnalysisSchema,
  otherDetails: OtherDetailsAnalysisSchema,
  originalData: ValidatedIdeaSchema
});`,
                code: `// Pure function - NO LLM call
export function aggregateAnalyses(
  validatedData,
  basicInfo,
  technologies,
  businessContext,
  regulations,
  differentiators,
  otherDetails
): AggregatedData {
  return {
    basicInfo,
    technologies,
    businessContext,
    regulations,
    differentiators,
    otherDetails,
    originalData: validatedData
  };
}`,
                details: [
                    ['Type', 'Pure Function'],
                    ['LLM', 'NO - Zero cost'],
                    ['Purpose', 'Merge all analyses'],
                    ['Execution', 'Instant']
                ]
            },
            htmlbuilder: {
                title: 'üèóÔ∏è HTML BUILDER AGENT',
                desc: 'Content Strategist care creeazƒÉ structura de con»õinut pentru a VINDE ideea cƒÉtre decision makers.',
                schema: `HTMLBuilderOutputSchema = z.object({
  pageTitle: z.string(),
  sections: z.array(z.object({
    id: z.string(),
    type: z.string(),
    content: z.object({
      title: z.string(),
      subtitle: z.string().optional(),
      items: z.array(z.string()).optional(),
      badges: z.array(z.string()).optional(),
      highlight: z.string().optional()
    })
  })),
  callToAction: z.object({
    primary: z.string(),
    secondary: z.string().optional()
  }),
  metadata: z.object({
    category: z.string(),
    readinessLevel: z.string(),
    innovationLevel: z.string()
  })
});`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Role', 'CONTENT STRATEGIST'],
                    ['Output', 'Page Structure + CTAs'],
                    ['Sections', '5-7 per page']
                ]
            },
            statistician: {
                title: 'üìä STATISTICIAN AGENT',
                desc: 'Investment Committee Member care evalueazƒÉ ideea pe 5 axe: Innovation, Feasibility, Business Value, Compliance, Readiness.',
                schema: `StatisticsOutputSchema = z.object({
  overallScore: z.number(),  // 0-100
  categoryScores: z.object({
    innovation: z.number(),
    feasibility: z.number(),
    businessValue: z.number(),
    compliance: z.number(),
    readiness: z.number()
  }),
  strengths: z.array(z.string()),
  improvements: z.array(z.string()),
  recommendation: z.enum([
    "STRONG_YES", "YES", "MAYBE", "NO", "STRONG_NO"
  ]),
  summaryText: z.string()
});`,
                details: [
                    ['Model', 'claude-3-haiku'],
                    ['Role', 'INVESTMENT COMMITTEE'],
                    ['Scores', '5 axes (0-100)'],
                    ['Output', 'Verdict + Recommendations']
                ]
            },
            visual: {
                title: 'üé® VISUAL DESIGNER',
                desc: 'Func»õie PURƒÇ care genereazƒÉ HTML-ul final √Æn stil TELETEXT cu toate datele agregate »ôi scorurile.',
                code: `// Pure function - generates full HTML
export function designVisualOutput(
  data: AggregatedData,
  htmlContent: HTMLBuilderOutput,
  statistics: StatisticsOutput,
  originalTitle: string
): VisualOutput {
  
  const html = \`
    <div style="background:#0a0a2e;color:#fff;...">
      <!-- HEADER -->
      <!-- HERO SECTION -->
      <!-- TECH STACK -->
      <!-- BUSINESS CONTEXT -->
      <!-- SCORES with Progress Bars -->
      <!-- STRENGTHS & IMPROVEMENTS -->
      <!-- COMPLIANCE STATUS -->
      <!-- FOOTER -->
    </div>
  \`;
  
  return { pages: [...], htmlOutput: html };
}`,
                details: [
                    ['Type', 'Pure Function'],
                    ['LLM', 'NO - Zero cost'],
                    ['Output', 'Full HTML Page'],
                    ['Style', 'Teletext/Retro']
                ]
            },
            output: {
                title: 'üì∫ TELETEXT OUTPUT',
                desc: 'Pagina finalƒÉ generatƒÉ, salvatƒÉ √Æn PostgreSQL »ôi afi»ôatƒÉ utilizatorului cu design Teletext retro.',
                schema: `PipelineResult = {
  success: boolean,
  validatedData: ValidatedIdea,
  aggregatedAnalysis: AggregatedData,
  statistics: StatisticsOutput,
  visualOutput: {
    pages: TeletextPage[],
    htmlOutput: string,
    cssVariables: { primaryColor, accentColor }
  }
}`,
                details: [
                    ['Storage', 'PostgreSQL'],
                    ['Format', 'Full HTML'],
                    ['Design', 'Teletext/Retro'],
                    ['Access', '/ideas/[id]/page']
                ]
            }
        };

        let isRunning = false;

        function showPanel(id) {
            const agent = agents[id];
            if (!agent) return;

            document.querySelectorAll('.node').forEach(n => n.classList.remove('selected'));
            document.querySelector(`[data-id="${id}"]`)?.classList.add('selected');

            let html = `
                <div class="section">
                    <div class="section-title">DESCRIERE</div>
                    <div class="info-card"><p>${agent.desc}</p></div>
                </div>
            `;

            if (agent.schema) {
                html += `
                    <div class="section">
                        <div class="section-title">ZOD SCHEMA</div>
                        <div class="code-box"><code>${agent.schema}</code></div>
                    </div>
                `;
            }

            if (agent.code) {
                html += `
                    <div class="section">
                        <div class="section-title">CODE</div>
                        <div class="code-box"><code>${agent.code}</code></div>
                    </div>
                `;
            }

            if (agent.details) {
                html += `<div class="section"><div class="section-title">DETAILS</div>`;
                agent.details.forEach(([label, value]) => {
                    html += `<div class="detail-row"><span class="detail-label">${label}</span><span class="detail-value">${value}</span></div>`;
                });
                html += `</div>`;
            }

            document.getElementById('panelTitle').textContent = agent.title;
            document.getElementById('panelContent').innerHTML = html;
            document.getElementById('panel').classList.add('open');
        }

        function closePanel() {
            document.getElementById('panel').classList.remove('open');
            document.querySelectorAll('.node').forEach(n => n.classList.remove('selected'));
        }

        async function runPipeline() {
            if (isRunning) return;
            isRunning = true;

            const btn = document.getElementById('runBtn');
            const bar = document.getElementById('progressBar');
            const fill = document.getElementById('progressFill');
            const status = document.getElementById('progressStatus');

            // Reset
            document.querySelectorAll('.node').forEach(n => n.classList.remove('running', 'done'));
            document.querySelectorAll('.arrow').forEach(a => a.classList.remove('active', 'done'));

            btn.classList.add('running');
            btn.textContent = '‚ü≥ RUNNING...';
            bar.classList.add('visible');

            const steps = [
                { nodes: ['input'], msg: 'Processing form input...', pct: 10 },
                { nodes: ['validator'], msg: 'Validating & enriching...', pct: 20 },
                { nodes: ['basic', 'tech', 'business', 'regulations', 'differentiators', 'other'], msg: 'Running 6 analyzers in parallel...', pct: 50, parallel: true },
                { nodes: ['aggregator'], msg: 'Aggregating analyses...', pct: 60 },
                { nodes: ['htmlbuilder'], msg: 'Building HTML structure...', pct: 75 },
                { nodes: ['statistician'], msg: 'Calculating scores...', pct: 85 },
                { nodes: ['visual'], msg: 'Designing visual output...', pct: 95 },
                { nodes: ['output'], msg: 'Complete!', pct: 100 }
            ];

            for (let i = 0; i < steps.length; i++) {
                const step = steps[i];
                status.textContent = step.msg;
                fill.style.width = step.pct + '%';

                if (i > 0) {
                    const arrow = document.querySelector(`[data-arrow="${i-1}"]`);
                    if (arrow) arrow.classList.add('active');
                }

                step.nodes.forEach(id => {
                    document.querySelector(`[data-id="${id}"]`)?.classList.add('running');
                });

                await sleep(step.parallel ? 2000 : 800);

                step.nodes.forEach(id => {
                    const node = document.querySelector(`[data-id="${id}"]`);
                    node?.classList.remove('running');
                    node?.classList.add('done');
                });

                if (i > 0) {
                    const arrow = document.querySelector(`[data-arrow="${i-1}"]`);
                    if (arrow) {
                        arrow.classList.remove('active');
                        arrow.classList.add('done');
                    }
                }
            }

            status.textContent = '‚úÖ PIPELINE COMPLETE!';
            btn.classList.remove('running');
            btn.textContent = '‚úì COMPLETE';

            await sleep(3000);
            bar.classList.remove('visible');
            btn.textContent = '‚ñ∂ RUN PIPELINE';
            isRunning = false;
        }

        function sleep(ms) { return new Promise(r => setTimeout(r, ms)); }
    </script>
</body>
</html>
